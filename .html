<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>星际航行 | Star Voyage</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;500;700&family=Noto+Sans+SC:wght@300;400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-cyan: #00f3ff;
            --neon-pink: #ff00ff;
            --neon-gold: #ffd700;
            --glass-bg: rgba(0, 5, 16, 0.15);
            --glass-border: rgba(0, 243, 255, 0.15);
            --font-mono: 'Share Tech Mono', 'Courier New', monospace;
            --font-tech: 'Orbitron', 'Exo 2', sans-serif;
            --font-cn: 'Noto Sans SC', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-cn);
            background: #000;
            color: #fff;
            overflow: hidden;
            height: 100vh;
            position: relative;
        }

        /* 星空画布 */
        #starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        /* 超空间扭曲效果 */
        .warp-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.8) 100%);
            z-index: 1;
            pointer-events: none;
            opacity: 0.3;
        }

        /* 主容器 - 极简透明 */
        .container {
            position: relative;
            z-index: 10;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* 玻璃面板 - 几乎全透明，仅边框发光 */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(8px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            padding: 40px 50px;
            box-shadow: 
                0 0 0 1px rgba(0, 243, 255, 0.05),
                0 20px 50px rgba(0, 0, 0, 0.5),
                inset 0 0 80px rgba(0, 243, 255, 0.02);
            position: relative;
            overflow: hidden;
            max-width: 700px;
            width: 100%;
        }

        /* 角落发光装饰 */
        .glass-panel::before {
            content: '';
            position: absolute;
            top: -2px; left: -2px; right: -2px; bottom: -2px;
            background: linear-gradient(45deg, transparent, var(--neon-cyan), transparent);
            border-radius: 30px;
            opacity: 0.3;
            z-index: -1;
            filter: blur(10px);
        }

        /* 顶部装饰线 */
        .panel-accent {
            position: absolute;
            top: 0;
            left: 20%;
            right: 20%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--neon-cyan), transparent);
            opacity: 0.6;
        }

        /* 模式切换 - 悬浮标签 */
        .tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 40px;
            justify-content: center;
            position: relative;
        }

        .tab {
            padding: 10px 25px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            cursor: pointer;
            font-family: var(--font-tech);
            font-size: 0.85rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            transition: all 0.3s;
            color: rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
        }

        .tab::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 243, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .tab:hover::before {
            left: 100%;
        }

        .tab.active {
            border-color: var(--neon-cyan);
            color: var(--neon-cyan);
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.3), inset 0 0 10px rgba(0, 243, 255, 0.1);
            text-shadow: 0 0 10px var(--neon-cyan);
        }

        /* 时间显示 - 使用科技等宽字体 */
        .display {
            margin: 30px 0;
            position: relative;
        }

        .time-main {
            font-family: var(--font-mono);
            font-size: 6rem;
            font-weight: 400;
            letter-spacing: 8px;
            color: #fff;
            text-shadow: 
                0 0 20px rgba(255, 255, 255, 0.8),
                0 0 40px var(--neon-cyan),
                0 0 80px rgba(0, 243, 255, 0.5);
            line-height: 1;
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
        }

        /* 时间分隔符闪烁 */
        .time-main .colon {
            animation: blink 1s infinite;
            opacity: 0.8;
        }

        @keyframes blink {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .time-sub {
            font-family: var(--font-tech);
            font-size: 1.2rem;
            letter-spacing: 4px;
            color: var(--neon-gold);
            text-transform: uppercase;
            opacity: 0.9;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        /* 信息网格 - 极简线条风格 */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .info-grid::before {
            content: '◆';
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
            color: var(--neon-cyan);
            font-size: 0.5rem;
            opacity: 0.5;
        }

        .info-item {
            text-align: center;
            position: relative;
        }

        .info-item:not(:last-child)::after {
            content: '';
            position: absolute;
            right: -15px;
            top: 50%;
            transform: translateY(-50%);
            height: 30px;
            width: 1px;
            background: linear-gradient(180deg, transparent, rgba(255,255,255,0.2), transparent);
        }

        .info-label {
            font-family: var(--font-tech);
            font-size: 0.65rem;
            letter-spacing: 3px;
            color: rgba(255, 255, 255, 0.4);
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .info-value {
            font-family: var(--font-cn);
            font-size: 1.3rem;
            font-weight: 300;
            color: rgba(255, 255, 255, 0.95);
            letter-spacing: 1px;
        }

        .zodiac {
            color: var(--neon-gold);
            font-weight: 500;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
        }

        .weekday {
            color: var(--neon-pink);
            text-shadow: 0 0 15px rgba(255, 0, 255, 0.3);
        }

        /* 输入框 - 透明科技风 */
        .input-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
            align-items: center;
        }

        .time-input {
            width: 80px;
            height: 60px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: #fff;
            text-align: center;
            font-family: var(--font-mono);
            font-size: 1.8rem;
            letter-spacing: 2px;
            transition: all 0.3s;
        }

        .time-input:focus {
            outline: none;
            border-color: var(--neon-cyan);
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.2);
            background: rgba(0, 0, 0, 0.5);
        }

        .input-separator {
            font-family: var(--font-mono);
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.3);
        }

        /* 按钮 - 霓虹光效 */
        .btn {
            padding: 12px 30px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.8);
            border-radius: 25px;
            cursor: pointer;
            font-family: var(--font-tech);
            font-size: 0.85rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            margin: 0 5px;
        }

        .btn:hover {
            background: rgba(0, 243, 255, 0.1);
            border-color: var(--neon-cyan);
            color: var(--neon-cyan);
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.3);
            transform: translateY(-2px);
        }

        .btn.primary {
            border-color: var(--neon-cyan);
            color: var(--neon-cyan);
            background: rgba(0, 243, 255, 0.05);
        }

        .btn.danger {
            border-color: var(--neon-pink);
            color: var(--neon-pink);
            background: rgba(255, 0, 255, 0.05);
        }

        .btn.danger:hover {
            box-shadow: 0 0 30px rgba(255, 0, 255, 0.3);
        }

        /* 进度环 */
        .progress-ring {
            position: relative;
            width: 220px;
            height: 220px;
            margin: 20px auto;
        }

        .progress-ring svg {
            transform: rotate(-90deg);
            filter: drop-shadow(0 0 5px var(--neon-cyan));
        }

        .progress-ring-bg {
            fill: none;
            stroke: rgba(255, 255, 255, 0.05);
            stroke-width: 3;
        }

        .progress-ring-fill {
            fill: none;
            stroke: var(--neon-cyan);
            stroke-width: 3;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.1s linear;
            filter: drop-shadow(0 0 8px var(--neon-cyan));
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: var(--font-mono);
            font-size: 3rem;
            color: #fff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            letter-spacing: 2px;
        }

        /* 计次列表 */
        .laps {
            max-height: 120px;
            overflow-y: auto;
            margin-top: 20px;
            font-family: var(--font-mono);
            font-size: 0.9rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 10px;
        }

        .lap-item {
            padding: 8px 15px;
            display: flex;
            justify-content: space-between;
            color: rgba(255, 255, 255, 0.6);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-family: var(--font-mono);
        }

        .lap-item span:first-child {
            color: var(--neon-cyan);
            opacity: 0.8;
        }

        /* 隐藏类 */
        .hidden { display: none !important; }

        /* 响应式 */
        @media (max-width: 600px) {
            .time-main { font-size: 3.5rem; letter-spacing: 4px; }
            .glass-panel { padding: 30px 25px; border-radius: 20px; }
            .info-grid { grid-template-columns: 1fr; gap: 15px; }
            .info-item:not(:last-child)::after { display: none; }
            .progress-ring { width: 180px; height: 180px; }
            .progress-text { font-size: 2.5rem; }
        }

        /* 滚动条 */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: rgba(0, 243, 255, 0.3); border-radius: 3px; }
    </style>
</head>
<body>

    <canvas id="starfield"></canvas>
    <div class="warp-overlay"></div>

    <div class="container">
        <div class="glass-panel">
            <div class="panel-accent"></div>
            
            <div class="tabs">
                <div class="tab active" onclick="app.switchMode('clock')">Clock</div>
                <div class="tab" onclick="app.switchMode('timer')">Timer</div>
                <div class="tab" onclick="app.switchMode('stopwatch')">Stopwatch</div>
            </div>

            <!-- 时钟模式 -->
            <div id="mode-clock" class="mode-content">
                <div class="display">
                    <div class="time-main" id="clock-time">00<span class="colon">:</span>00<span class="colon">:</span>00</div>
                    <div class="time-sub" id="clock-date">2026.01.30</div>
                </div>
                
                <div class="info-grid">
                    <div class="info-item">
                        <div class="info-label">Week</div>
                        <div class="info-value weekday" id="weekday">Friday</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Zodiac</div>
                        <div class="info-value zodiac" id="zodiac">Aquarius</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Year</div>
                        <div class="info-value" id="year-cn">农历腊月十一</div>
                    </div>
                </div>
            </div>

            <!-- 倒计时模式 -->
            <div id="mode-timer" class="mode-content hidden">
                <div class="setup" id="timer-setup">
                    <div class="input-group">
                        <input type="number" class="time-input" id="timer-h" placeholder="00" min="0" max="99">
                        <span class="input-separator">:</span>
                        <input type="number" class="time-input" id="timer-m" placeholder="00" min="0" max="59">
                        <span class="input-separator">:</span>
                        <input type="number" class="time-input" id="timer-s" placeholder="00" min="0" max="59">
                    </div>
                    <button class="btn primary" onclick="timer.start()">Initiate</button>
                </div>

                <div class="running hidden" id="timer-running">
                    <div class="progress-ring">
                        <svg width="220" height="220" viewBox="0 0 220 220">
                            <circle class="progress-ring-bg" cx="110" cy="110" r="100"></circle>
                            <circle class="progress-ring-fill" id="timer-circle" cx="110" cy="110" r="100" 
                                    stroke-dasharray="628.32" stroke-dashoffset="0"></circle>
                        </svg>
                        <div class="progress-text" id="timer-display">00:00:00</div>
                    </div>
                    <div class="controls">
                        <button class="btn danger" onclick="timer.toggle()">Pause</button>
                        <button class="btn" onclick="timer.reset()">Abort</button>
                    </div>
                </div>
            </div>

            <!-- 秒表模式 -->
            <div id="mode-stopwatch" class="mode-content hidden">
                <div class="display">
                    <div class="time-main" id="stopwatch-display" style="font-size: 4.5rem;">00<span class="colon">:</span>00<span class="colon">.</span>00</div>
                </div>
                <div class="controls">
                    <button class="btn primary" id="sw-btn" onclick="stopwatch.toggle()">Start</button>
                    <button class="btn" onclick="stopwatch.lap()" id="sw-lap" disabled>Mark</button>
                    <button class="btn danger" onclick="stopwatch.reset()">Reset</button>
                </div>
                <div class="laps" id="sw-laps"></div>
            </div>
        </div>
    </div>

    <script>
        /* ========== 3D星际航行系统 ========== */
        const canvas = document.getElementById('starfield');
        const ctx = canvas.getContext('2d');
        let width, height, centerX, centerY;
        
        // 飞船速度（可交互调整）
        let speed = 2;
        let warpSpeed = false;
        
        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            centerX = width / 2;
            centerY = height / 2;
        }

        // 3D星星类 - 向屏幕飞来
        class Star3D {
            constructor() {
                this.init(true);
            }

            init(randomZ = false) {
                // x,y 在 -width 到 width 之间随机
                this.x = (Math.random() - 0.5) * width * 2;
                this.y = (Math.random() - 0.5) * height * 2;
                // z 深度，随机分布或从远处开始
                this.z = randomZ ? Math.random() * 2000 : 2000;
                this.pz = this.z; // 上一个z位置（用于拖尾）
                
                this.size = Math.random() * 2;
                this.color = Math.random() > 0.9 ? '#00f3ff' : (Math.random() > 0.8 ? '#ff00ff' : '#ffffff');
                this.brightness = Math.random();
            }

            update() {
                // 向屏幕飞来（z减小）
                const currentSpeed = warpSpeed ? speed * 8 : speed;
                this.z -= currentSpeed;
                
                // 如果到达屏幕前，重置到远处
                if (this.z <= 0) {
                    this.init();
                    this.pz = this.z;
                } else {
                    this.pz = this.z + currentSpeed;
                }
            }

            draw() {
                // 3D投影到2D屏幕
                const x2d = centerX + (this.x / this.z) * 1000;
                const y2d = centerY + (this.y / this.z) * 1000;
                
                // 上一个位置（用于绘制拖尾）
                const px2d = centerX + (this.x / this.pz) * 1000;
                const py2d = centerY + (this.y / this.pz) * 1000;
                
                // 大小根据距离变化
                const size = Math.max(0.1, (2000 - this.z) / 1000 * this.size);
                
                // 透明度根据距离
                const alpha = Math.min(1, (2000 - this.z) / 1000);
                
                // 绘制拖尾（ warp 效果）
                if (warpSpeed || (Math.abs(px2d - x2d) > 5 || Math.abs(py2d - y2d) > 5)) {
                    const gradient = ctx.createLinearGradient(px2d, py2d, x2d, y2d);
                    gradient.addColorStop(0, `rgba(${this.hexToRgb(this.color)}, 0)`);
                    gradient.addColorStop(1, `rgba(${this.hexToRgb(this.color)}, ${alpha})`);
                    
                    ctx.beginPath();
                    ctx.moveTo(px2d, py2d);
                    ctx.lineTo(x2d, y2d);
                    ctx.strokeStyle = gradient;
                    ctx.lineWidth = size;
                    ctx.stroke();
                }
                
                // 绘制星星本体
                ctx.beginPath();
                ctx.arc(x2d, y2d, size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(${this.hexToRgb(this.color)}, ${alpha})`;
                ctx.fill();
                
                // 发光效果
                if (this.z < 500) {
                    ctx.shadowBlur = 10;
                    ctx.shadowColor = this.color;
                    ctx.fill();
                    ctx.shadowBlur = 0;
                }
            }

            hexToRgb(hex) {
                const r = parseInt(hex.slice(1, 3), 16);
                const g = parseInt(hex.slice(3, 5), 16);
                const b = parseInt(hex.slice(5, 7), 16);
                return `${r},${g},${b}`;
            }
        }

        // 流星类
        class ShootingStar {
            constructor() {
                this.reset();
            }

            reset() {
                this.x = Math.random() * width;
                this.y = Math.random() * height * 0.5; // 上半部分出现
                this.length = Math.random() * 80 + 50;
                this.speed = Math.random() * 10 + 15;
                this.angle = Math.PI / 4 + (Math.random() - 0.5) * 0.2; // 45度左右
                this.life = 1;
                this.decay = 0.02;
                this.active = false;
                // 随机延迟激活
                setTimeout(() => this.active = true, Math.random() * 5000);
            }

            update() {
                if (!this.active) return;
                
                this.x += Math.cos(this.angle) * this.speed;
                this.y += Math.sin(this.angle) * this.speed;
                this.life -= this.decay;
                
                if (this.life <= 0 || this.x > width || this.y > height) {
                    this.reset();
                    this.active = false;
                    setTimeout(() => this.active = true, Math.random() * 8000 + 3000);
                }
            }

            draw() {
                if (!this.active) return;
                
                const tailX = this.x - Math.cos(this.angle) * this.length;
                const tailY = this.y - Math.sin(this.angle) * this.length;
                
                const gradient = ctx.createLinearGradient(this.x, this.y, tailX, tailY);
                gradient.addColorStop(0, `rgba(255, 255, 255, ${this.life})`);
                gradient.addColorStop(0.1, `rgba(0, 243, 255, ${this.life * 0.8})`);
                gradient.addColorStop(1, `rgba(0, 243, 255, 0)`);
                
                ctx.beginPath();
                ctx.moveTo(this.x, this.y);
                ctx.lineTo(tailX, tailY);
                ctx.strokeStyle = gradient;
                ctx.lineWidth = 2;
                ctx.lineCap = 'round';
                ctx.stroke();
                
                // 头部光点
                ctx.beginPath();
                ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(255, 255, 255, ${this.life})`;
                ctx.shadowBlur = 10;
                ctx.shadowColor = '#00f3ff';
                ctx.fill();
                ctx.shadowBlur = 0;
            }
        }

        const stars = [];
        const shootingStars = [];
        const STAR_COUNT = 400; // 更多星星

        function init() {
            resize();
            for (let i = 0; i < STAR_COUNT; i++) {
                stars.push(new Star3D());
            }
            // 3颗流星
            for (let i = 0; i < 3; i++) {
                shootingStars.push(new ShootingStar());
            }
        }

        function animate() {
            // 拖尾效果（半透明清除）
            ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
            ctx.fillRect(0, 0, width, height);
            
            stars.forEach(star => {
                star.update();
                star.draw();
            });
            
            shootingStars.forEach(star => {
                star.update();
                star.draw();
            });
            
            requestAnimationFrame(animate);
        }

        window.addEventListener('resize', resize);
        
        // 鼠标交互 - 鼠标位置影响飞行方向（视差效果）
        window.addEventListener('mousemove', (e) => {
            const x = (e.clientX - centerX) / centerX;
            const y = (e.clientY - centerY) / centerY;
            
            // 微妙的方向偏移
            stars.forEach(star => {
                star.x -= x * 2;
                star.y -= y * 2;
            });
        });

        // 点击加速（曲速航行）
        window.addEventListener('mousedown', () => warpSpeed = true);
        window.addEventListener('mouseup', () => warpSpeed = false);
        window.addEventListener('touchstart', () => warpSpeed = true);
        window.addEventListener('touchend', () => warpSpeed = false);

        init();
        animate();

        /* ========== 农历计算 ========== */
        function getLunarDate(date) {
            const lunarMonths = ['正', '二', '三', '四', '五', '六', '七', '八', '九', '十', '冬', '腊'];
            const lunarDays = ['初一', '初二', '初三', '初四', '初五', '初六', '初七', '初八', '初九', '初十',
                '十一', '十二', '十三', '十四', '十五', '十六', '十七', '十八', '十九', '二十',
                '廿一', '廿二', '廿三', '廿四', '廿五', '廿六', '廿七', '廿八', '廿九', '三十'];
            
            // 简化的农历计算（2025-2026年近似值）
            const year = date.getFullYear();
            const month = date.getMonth();
            const day = date.getDate();
            
            // 2025年春节是1月29日，2026年春节是2月17日
            let lunarYear, lunarMonth, lunarDay;
            
            if (year === 2025) {
                if (month === 0 && day < 29) { // 1月1日-28日还是甲辰年腊月
                    lunarYear = '甲辰';
                    lunarMonth = 11; // 腊月
                    lunarDay = day + 3; // 近似偏移
                } else {
                    lunarYear = '乙巳';
                    const daysSinceSpring = (month === 0 ? day - 29 : 31 - 29 + day + (month > 1 ? 28 : 0) + [0,31,59,90,120,151,181,212,243,273,304,334][month - 1]);
                    // 简化的月份计算
                    lunarMonth = Math.floor(daysSinceSpring / 29.5) % 12;
                    lunarDay = Math.floor(daysSinceSpring % 29.5) + 1;
                }
            } else { // 2026
                if (month === 0 || (month === 1 && day < 17)) {
                    lunarYear = '乙巳';
                    const daysSinceJan1 = month === 0 ? day : 31 + day;
                    const daysSinceSpring2025 = 365 - 29 + 1 + daysSinceJan1; // 从2025春节算起
                    lunarMonth = Math.floor(daysSinceSpring2025 / 29.5) % 12;
                    lunarDay = Math.floor(daysSinceSpring2025 % 29.5) + 1;
                } else {
                    lunarYear = '丙午';
                    lunarMonth = 0;
                    lunarDay = day - 16;
                }
            }
            
            if (lunarDay >= 30) lunarDay = 29;
            return `农历${lunarMonths[lunarMonth]}月${lunarDays[lunarDay - 1]}`;
        }

        /* ========== 星座计算 ========== */
        function getZodiac(month, day) {
            const dates = [20, 19, 21, 20, 21, 22, 23, 23, 23, 24, 23, 22];
            const signs = ['水瓶座', '双鱼座', '白羊座', '金牛座', '双子座', '巨蟹座', 
                '狮子座', '处女座', '天秤座', '天蝎座', '射手座', '摩羯座'];
            
            if (day < dates[month]) {
                return signs[month];
            } else {
                return signs[(month + 1) % 12];
            }
        }

        /* ========== 时钟 ========== */
        function updateClock() {
            const now = new Date();
            
            // 主时间 - 带闪烁冒号
            const h = String(now.getHours()).padStart(2, '0');
            const m = String(now.getMinutes()).padStart(2, '0');
            const s = String(now.getSeconds()).padStart(2, '0');
            document.getElementById('clock-time').innerHTML = 
                `${h}<span class="colon">:</span>${m}<span class="colon">:</span>${s}`;
            
            // 日期格式：2026.01.30
            const y = now.getFullYear();
            const mo = String(now.getMonth() + 1).padStart(2, '0');
            const d = String(now.getDate()).padStart(2, '0');
            document.getElementById('clock-date').textContent = `${y}.${mo}.${d}`;
            
            // 星期 - 英文简洁
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            document.getElementById('weekday').textContent = days[now.getDay()];
            
            // 农历
            document.getElementById('year-cn').textContent = getLunarDate(now);
            
            // 星座
            document.getElementById('zodiac').textContent = getZodiac(now.getMonth(), now.getDate());
        }

        setInterval(updateClock, 1000);
        updateClock();

        /* ========== 倒计时 ========== */
        const timer = {
            totalSeconds: 0,
            remaining: 0,
            interval: null,
            isRunning: false,
            
            start() {
                const h = parseInt(document.getElementById('timer-h').value) || 0;
                const m = parseInt(document.getElementById('timer-m').value) || 0;
                const s = parseInt(document.getElementById('timer-s').value) || 0;
                
                this.totalSeconds = h * 3600 + m * 60 + s;
                if (this.totalSeconds <= 0) return;
                
                this.remaining = this.totalSeconds;
                this.isRunning = true;
                
                document.getElementById('timer-setup').classList.add('hidden');
                document.getElementById('timer-running').classList.remove('hidden');
                
                this.update();
                this.interval = setInterval(() => this.tick(), 1000);
            },
            
            tick() {
                if (!this.isRunning) return;
                this.remaining--;
                this.update();
                
                if (this.remaining <= 0) {
                    this.complete();
                }
            },
            
            update() {
                const h = Math.floor(this.remaining / 3600);
                const m = Math.floor((this.remaining % 3600) / 60);
                const s = this.remaining % 60;
                
                const display = `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
                document.getElementById('timer-display').textContent = display;
                
                // 更新圆环
                const circle = document.getElementById('timer-circle');
                const circumference = 2 * Math.PI * 100;
                const offset = circumference * (1 - this.remaining / this.totalSeconds);
                circle.style.strokeDashoffset = offset;
            },
            
            toggle() {
                this.isRunning = !this.isRunning;
                event.target.textContent = this.isRunning ? 'Pause' : 'Resume';
            },
            
            reset() {
                clearInterval(this.interval);
                this.isRunning = false;
                document.getElementById('timer-setup').classList.remove('hidden');
                document.getElementById('timer-running').classList.add('hidden');
                document.querySelectorAll('.time-input').forEach(i => i.value = '');
                document.querySelector('#timer-running .btn').textContent = 'Pause';
            },
            
            complete() {
                clearInterval(this.interval);
                document.getElementById('timer-display').textContent = 'COMPLETED';
                document.getElementById('timer-display').style.color = '#ff00ff';
                
                // 视觉反馈
                setTimeout(() => {
                    document.getElementById('timer-display').style.color = '';
                    this.reset();
                }, 3000);
            }
        };

        /* ========== 秒表 ========== */
        const stopwatch = {
            startTime: 0,
            elapsed: 0,
            interval: null,
            running: false,
            laps: [],
            
            toggle() {
                if (!this.running) {
                    this.start();
                } else {
                    this.stop();
                }
            },
            
            start() {
                this.startTime = Date.now() - this.elapsed;
                this.interval = setInterval(() => this.update(), 10);
                this.running = true;
                document.getElementById('sw-btn').textContent = 'Stop';
                document.getElementById('sw-btn').classList.add('danger');
                document.getElementById('sw-btn').classList.remove('primary');
                document.getElementById('sw-lap').disabled = false;
            },
            
            stop() {
                clearInterval(this.interval);
                this.running = false;
                document.getElementById('sw-btn').textContent = 'Start';
                document.getElementById('sw-btn').classList.remove('danger');
                document.getElementById('sw-btn').classList.add('primary');
                document.getElementById('sw-lap').disabled = true;
            },
            
            update() {
                this.elapsed = Date.now() - this.startTime;
                this.display();
            },
            
            display() {
                const ms = Math.floor((this.elapsed % 1000) / 10);
                const s = Math.floor((this.elapsed / 1000) % 60);
                const m = Math.floor((this.elapsed / (1000 * 60)) % 60);
                
                const display = `${String(m).padStart(2, '0')}<span class="colon">:</span>${String(s).padStart(2, '0')}<span class="colon">.</span>${String(ms).padStart(2, '0')}`;
                document.getElementById('stopwatch-display').innerHTML = display;
            },
            
            lap() {
                const lapNum = this.laps.length + 1;
                const current = this.elapsed;
                const last = this.laps.length > 0 ? this.laps[this.laps.length - 1].raw : 0;
                const split = current - last;
                
                this.laps.push({ num: lapNum, raw: current, split: split });
                
                const format = (ms) => {
                    const m = Math.floor(ms / 60000);
                    const s = Math.floor((ms % 60000) / 1000);
                    const cs = Math.floor((ms % 1000) / 10);
                    return `${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}.${String(cs).padStart(2, '0')}`;
                };
                
                const div = document.createElement('div');
                div.className = 'lap-item';
                div.innerHTML = `<span>#${lapNum}</span><span>+${format(split)} &nbsp; ${format(current)}</span>`;
                document.getElementById('sw-laps').insertBefore(div, document.getElementById('sw-laps').firstChild);
            },
            
            reset() {
                this.stop();
                this.elapsed = 0;
                this.laps = [];
                this.display();
                document.getElementById('sw-laps').innerHTML = '';
            }
        };

        /* ========== 模式切换 ========== */
        const app = {
            switchMode(mode) {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                event.target.classList.add('active');
                
                document.querySelectorAll('.mode-content').forEach(el => el.classList.add('hidden'));
                document.getElementById(`mode-${mode}`).classList.remove('hidden');
            }
        };
    </script>
</body>
</html>
